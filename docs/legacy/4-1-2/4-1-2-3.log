2025-05-17T18:39:40.495+03:00  INFO 14844 --- [common] [nio-8080-exec-1] c.m.f.command.CommandController          : Received DepositCommand: com.mayosen.financeapp.command.api.v1.DepositRequest@34d5faea
2025-05-17T18:39:40.511+03:00  INFO 14844 --- [common] [nio-8080-exec-1] c.m.financeapp.command.CommandHandler    : Processing DepositCommand: com.mayosen.financeapp.command.DepositCommand@199b0dc4
2025-05-17T18:39:40.653+03:00 DEBUG 14844 --- [common] [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-05-17T18:39:40.655+03:00 DEBUG 14844 --- [common] [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT "SNAPSHOT"."BALANCE" AS "BALANCE", "SNAPSHOT"."TIMESTAMP" AS "TIMESTAMP", "SNAPSHOT"."AGGREGATE_ID" AS "AGGREGATE_ID", "SNAPSHOT"."LAST_SEQUENCE_NUMBER" AS "LAST_SEQUENCE_NUMBER" FROM "SNAPSHOT" WHERE "SNAPSHOT"."AGGREGATE_ID" = ?]
2025-05-17T18:39:40.720+03:00 DEBUG 14844 --- [common] [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-05-17T18:39:40.720+03:00 DEBUG 14844 --- [common] [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT "EVENT"."EVENT_ID" AS "EVENT_ID", "EVENT"."TIMESTAMP" AS "TIMESTAMP", "EVENT"."EVENT_TYPE" AS "EVENT_TYPE", "EVENT"."AGGREGATE_ID" AS "AGGREGATE_ID", "EVENT"."EVENT_FIELDS" AS "EVENT_FIELDS", "EVENT"."SEQUENCE_NUMBER" AS "SEQUENCE_NUMBER" FROM "EVENT" WHERE "EVENT"."AGGREGATE_ID" = ?]
2025-05-17T18:40:45.243+03:00 DEBUG 14844 --- [common] [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-05-17T18:40:45.243+03:00 DEBUG 14844 --- [common] [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT MAX(sequence_number) FROM event WHERE aggregate_id = ? ]
2025-05-17T18:40:45.339+03:00 DEBUG 14844 --- [common] [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL update
2025-05-17T18:40:45.340+03:00 DEBUG 14844 --- [common] [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [INSERT INTO "EVENT" ("AGGREGATE_ID", "EVENT_FIELDS", "EVENT_ID", "EVENT_TYPE", "SEQUENCE_NUMBER", "TIMESTAMP") VALUES (?, ?, ?, ?, ?, ?)]
2025-05-17T18:40:51.709+03:00 DEBUG 14844 --- [common] [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL query
2025-05-17T18:40:51.710+03:00 DEBUG 14844 --- [common] [nio-8080-exec-1] o.s.jdbc.core.JdbcTemplate               : Executing prepared SQL statement [SELECT COUNT(*) FROM "EVENT" WHERE "EVENT"."AGGREGATE_ID" = ?]
2025-05-17T18:40:51.714+03:00  INFO 14844 --- [common] [nio-8080-exec-1] c.m.financeapp.command.CommandHandler    : Successfully processed events for aggregate 7e668605-04b0-466c-b1bc-1a431c8aa27b
2025-05-17T18:40:51.877+03:00  INFO 14844 --- [common] [mmon-producer-1] c.m.f.event.kafka.KafkaEventPublisher    : Message sent SendResult [producerRecord=ProducerRecord(topic=financeapp-events, partition=null, headers=RecordHeaders(headers = [], isReadOnly = true), key=7e668605-04b0-466c-b1bc-1a431c8aa27b, value={"type":"com.mayosen.financeapp.event.DepositPerformedEvent","event":{"eventId":"4458590f-eb7d-4f58-9377-9f3f752bea71","aggregateId":"7e668605-04b0-466c-b1bc-1a431c8aa27b","timestamp":1747496445.238248100,"amount":100}}, timestamp=null), recordMetadata=financeapp-events-0@2]
